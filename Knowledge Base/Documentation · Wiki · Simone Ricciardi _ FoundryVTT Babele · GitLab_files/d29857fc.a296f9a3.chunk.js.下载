(this.webpackJsonp=this.webpackJsonp||[]).push([["d29857fc"],{"+p8b":function(t,e){t.exports=function(t){return t&&t.length?t[0]:void 0}},"47Nv":function(t,e,i){"use strict";i("LdIe"),i("z6RN"),i("PTOk"),i("aFm2"),i("R9qC"),i("B++/"),i("47t/"),i("UezY"),i("hG7+");var n=i("gAdM"),s=i.n(n),r=i("onSc"),u=i("q3oM"),l=i("spe0"),a=(i("v2fZ"),i("6IH5"));var o={name:"GlFilteredSearchSuggestionList",inject:["suggestionsListClass","termsAsTokens"],provide(){return{filteredSearchSuggestionListInstance:this}},props:{initialValue:{required:!1,validator:function(){return!0},default:null}},data:()=>({activeIdx:-1,registeredItems:[]}),computed:{initialActiveIdx(){var t=this;return this.registeredItems.findIndex((function(e){return t.valuesMatch(e.value,t.initialValue)}))},initialActiveItem(){return this.registeredItems[this.initialActiveIdx]},activeItem(){return this.termsAsTokens()||-2!==this.activeIdx?-1===this.activeIdx?this.initialActiveItem:this.registeredItems[this.activeIdx]:null},listClasses(){return[this.suggestionsListClass(),"dropdown-menu gl-filtered-search-suggestion-list"]}},watch:{initialValue(){this.activeIdx=-1}},methods:{valuesMatch:(t,e)=>null!=t&&null!=e&&("string"==typeof t&&"string"==typeof e?t.toLowerCase()===e.toLowerCase():t===e),register(t){this.registeredItems.push(t)},unregister(t){const e=this.registeredItems.indexOf(t);-1!==e&&(this.registeredItems.splice(e,1),e===this.activeIdx&&(this.activeIdx=-1))},nextItem(){this.termsAsTokens()?this.stepItem(1):this.stepItem(1,this.registeredItems.length-1)},prevItem(){this.termsAsTokens()?this.stepItem(-1):this.stepItem(-1,0)},stepItem(t,e){if(this.termsAsTokens()||this.activeIdx!==e&&(-1!==this.activeIdx||this.initialActiveIdx!==e)){const e=-1===this.activeIdx?this.initialActiveIdx:this.activeIdx;this.activeIdx=Object(a.l)(e,t,this.registeredItems.length)}else this.activeIdx=-2,this.$refs.top.scrollIntoView()},getValue(){return this.activeItem?this.activeItem.value:null}}},c=i("tBpV"),d=Object(c.a)(o,(function(){var t=this._self._c;return t("ul",{class:this.listClasses},[t("li",{ref:"top"}),this._v(" "),this._t("default")],2)}),[],!1,null,null,null).exports;const p=function(t){return function(t){var e,i;return"Symbol(Fragment)"===(null==t||null===(e=t.type)||void 0===e||null===(i=e.toString)||void 0===i?void 0:i.call(e))}(t)?Array.isArray(t.children)?t.children.every(p):p(t.children):!!function(t){var e,i;return"Symbol(Comment)"===(null==t||null===(e=t.type)||void 0===e||null===(i=e.toString)||void 0===i?void 0:i.call(e))}(t)};var h={name:"GlFilteredSearchTokenSegment",components:{Portal:r.Portal,GlFilteredSearchSuggestionList:d,GlFilteredSearchSuggestion:l.a},inject:["portalName","alignSuggestions","termsAsTokens"],inheritAttrs:!1,props:{active:{type:Boolean,required:!1,default:!1},isTerm:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"Search"},multiSelect:{type:Boolean,required:!1,default:!1},options:{type:Array,required:!1,default:function(){return null}},optionTextField:{type:String,required:!1,default:"title"},customInputKeydownHandler:{type:Function,required:!1,default:function(){return function(){return!1}}},value:{required:!0,validator:function(){return!0}},searchInputAttributes:{type:Object,required:!1,default:function(){return{}}},isLastToken:{type:Boolean,required:!1,default:!1},currentValue:{type:Array,required:!1,default:function(){return[]}},cursorPosition:{type:String,required:!1,default:"end",validator:function(t){return["start","end"].includes(t)}},viewOnly:{type:Boolean,required:!1,default:!1}},data(){return{fallbackValue:this.value}},computed:{hasTermSuggestion(){return!!this.termsAsTokens()&&(!!this.options&&this.options.some((function({value:t}){return t===a.b})))},matchingOption(){var t,e=this;return null===(t=this.options)||void 0===t?void 0:t.find((function(t){return t.value===e.value}))},nonMultipleValue(){return Array.isArray(this.value)?s()(this.value):this.value},inputValue:{get(){return this.isTerm?this.nonMultipleValue:this.matchingOption?this.matchingOption[this.optionTextField]:this.nonMultipleValue},set(t){this.$emit("input",t)}},hasOptionsOrSuggestions(){var t;return(null===(t=this.options)||void 0===t?void 0:t.length)||function(t){if(!t)return!1;const e="function"==typeof t?t():t;return!(Array.isArray(e)?e.every(p):p(e))}(this.$slots.suggestions)},defaultSuggestedValue(){var t;if(!this.options)return this.nonMultipleValue;if(this.value){const t=this.getMatchingOptionForInputValue(this.inputValue)||this.getMatchingOptionForInputValue(this.inputValue,{loose:!0});return t?t.value:this.hasTermSuggestion?a.b:null}const e=this.options.find((function(t){return t.default}));return e?e.value:this.isTerm||null===(t=this.options[0])||void 0===t?void 0:t.value},containerAttributes(){return this.isLastToken&&!this.active&&this.currentValue.length>1&&this.searchInputAttributes}},watch:{active:{immediate:!0,handler(t){t?this.activate():this.deactivate()}},inputValue(t){if(this.termsAsTokens())return;if(this.multiSelect)return;if("string"!=typeof t)return;const e=t.split('"').length%2==0;if(-1===t.indexOf(" ")||e)return;const[i,...n]=Object(a.k)(t).filter((function(t,e,i){return Boolean(t)||e===i.length-1}));this.$emit("input",i),n.length&&this.$emit("split",n)}},methods:{emitIfInactive(t){t.button!==u.c||this.active||(this.$emit("activate"),t.preventDefault())},getMatchingOptionForInputValue(t,{loose:e}={loose:!1}){var i,n=this;return null===(i=this.options)||void 0===i?void 0:i.find((function(i){return e?Object(a.h)(i[n.optionTextField],t):i[n.optionTextField]===t}))},activate(){var t=this;this.fallbackValue=this.value,this.$nextTick((function(){const{input:e}=t.$refs;e&&(e.focus(),e.scrollIntoView({block:"nearest",inline:"end"}),t.alignSuggestions(e),"start"===t.cursorPosition&&(null==e||e.setSelectionRange(0,0)))}))},deactivate(){var t;this.options&&!this.isTerm&&(null===(t=this.matchingOption)||void 0===t?void 0:t.value)!==this.value&&this.$emit("input",this.fallbackValue)},applySuggestion(t){const e=this.termsAsTokens()?t:Object(a.o)(t);this.$emit("select",e),this.multiSelect||(this.$emit("input",e===a.b?this.inputValue:e),this.$emit("complete",e))},showHeader(t){var e;return null===(e=t.value)||void 0===e?void 0:e.toString().startsWith("gl-filtered-search-suggestion-group-")},handleInputKeydown(t){var e=this;const{key:i}=t,{suggestions:n,input:s}=this.$refs,r=null==n?void 0:n.getValue(),u={ArrowLeft:function(){0===s.selectionStart&&(t.preventDefault(),e.$emit("previous"))},ArrowRight:function(){s.selectionEnd===e.inputValue.length&&(t.preventDefault(),e.$emit("next"))},Backspace:function(){""===e.inputValue&&(t.preventDefault(),e.$emit("backspace"))},Enter:function(){t.preventDefault(),null!=r?e.applySuggestion(r):e.$emit("submit")},":":function(){null!=r&&(t.preventDefault(),e.applySuggestion(r))},Escape:function(){t.preventDefault(),e.$emit("complete")}},l={ArrowDown:function(){return n.nextItem()},Down:function(){return n.nextItem()},ArrowUp:function(){return n.prevItem()},Up:function(){return n.prevItem()}};this.hasOptionsOrSuggestions&&Object.assign(u,l),Object.keys(u).includes(i)?u[i]():this.customInputKeydownHandler(t,{suggestedValue:r,inputValue:this.inputValue,applySuggestion:function(t){return e.applySuggestion(t)}})},handleBlur(){this.multiSelect?this.$emit("complete"):this.active&&this.$emit("deactivate")}}},g=Object(c.a)(h,(function(){var t=this,e=t._self._c;return e("div",t._g(t._b({staticClass:"gl-filtered-search-token-segment",class:{"gl-filtered-search-token-segment-active":t.active,"!gl-cursor-text":t.viewOnly},attrs:{"data-testid":"filtered-search-token-segment"}},"div",t.containerAttributes,!1),t.viewOnly?{}:{mousedown:t.emitIfInactive}),[t.active?[t._t("before-input",null,null,{submitValue:t.applySuggestion}),t._v(" "),"checkbox"===t.searchInputAttributes.type?e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],ref:"input",staticClass:"gl-filtered-search-token-segment-input",class:{"gl-filtered-search-token-segment-input-disabled":t.viewOnly},attrs:{"data-testid":"filtered-search-token-segment-input","aria-label":t.label,disabled:t.viewOnly,type:"checkbox"},domProps:{checked:Array.isArray(t.inputValue)?t._i(t.inputValue,null)>-1:t.inputValue},on:{keydown:t.handleInputKeydown,blur:t.handleBlur,change:function(e){var i=t.inputValue,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&(t.inputValue=i.concat([null])):r>-1&&(t.inputValue=i.slice(0,r).concat(i.slice(r+1)))}else t.inputValue=s}}},"input",t.searchInputAttributes,!1)):"radio"===t.searchInputAttributes.type?e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],ref:"input",staticClass:"gl-filtered-search-token-segment-input",class:{"gl-filtered-search-token-segment-input-disabled":t.viewOnly},attrs:{"data-testid":"filtered-search-token-segment-input","aria-label":t.label,disabled:t.viewOnly,type:"radio"},domProps:{checked:t._q(t.inputValue,null)},on:{keydown:t.handleInputKeydown,blur:t.handleBlur,change:function(e){t.inputValue=null}}},"input",t.searchInputAttributes,!1)):e("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],ref:"input",staticClass:"gl-filtered-search-token-segment-input",class:{"gl-filtered-search-token-segment-input-disabled":t.viewOnly},attrs:{"data-testid":"filtered-search-token-segment-input","aria-label":t.label,disabled:t.viewOnly,type:t.searchInputAttributes.type},domProps:{value:t.inputValue},on:{keydown:t.handleInputKeydown,blur:t.handleBlur,input:function(e){e.target.composing||(t.inputValue=e.target.value)}}},"input",t.searchInputAttributes,!1)),t._v(" "),e("portal",{key:"operator-"+t._uid,attrs:{to:t.portalName}},[t.hasOptionsOrSuggestions?e("gl-filtered-search-suggestion-list",{key:"operator-"+t._uid,ref:"suggestions",attrs:{role:"list",tabindex:"0","initial-value":t.defaultSuggestedValue},on:{suggestion:t.applySuggestion}},[t.options?[t._l(t.options,(function(i,n){return[t.showHeader(i)?[n>0?e("li",{key:"separator-"+n},[e("hr",{staticClass:"gl-border-t -gl-mx-2 gl-my-2"})]):t._e(),t._v(" "),e("li",{key:"header-"+n,staticClass:"gl-mx-0 gl-pb-2 gl-pl-5 gl-pt-3 gl-text-sm gl-font-bold gl-text-strong",attrs:{role:"presentation","data-testid":"filtered-search-section-header"}},[t._v("\n                "+t._s(i.title)+"\n              ")])]:e("gl-filtered-search-suggestion",{key:`${i.value}-${n}`,attrs:{value:i.value,"icon-name":i.icon}},[t._t("option",(function(){return[i.component?[e(i.component,{tag:"component",attrs:{option:i}})]:[t._v("\n                  "+t._s(i[t.optionTextField])+"\n                ")]]}),null,{option:i})],2)]}))]:t._t("suggestions")],2):t._e()],1)]:t._t("view",(function(){return[t._v(t._s(t.inputValue))]}),null,{label:t.label,inputValue:t.inputValue})],2)}),[],!1,null,null,null);e.a=g.exports},"6IH5":function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"a",(function(){return d})),i.d(e,"c",(function(){return p})),i.d(e,"g",(function(){return h})),i.d(e,"j",(function(){return g})),i.d(e,"i",(function(){return v})),i.d(e,"l",(function(){return m})),i.d(e,"n",(function(){return y})),i.d(e,"f",(function(){return V})),i.d(e,"d",(function(){return S})),i.d(e,"e",(function(){return k})),i.d(e,"h",(function(){return w})),i.d(e,"m",(function(){return x})),i.d(e,"k",(function(){return A})),i.d(e,"o",(function(){return O}));i("ZzK0"),i("z6RN"),i("BzOf"),i("v2fZ"),i("aFm2"),i("R9qC"),i("RFHG"),i("xuo1"),i("UezY"),i("hG7+"),i("86Lb");var n=i("bta6"),s=i.n(n),r=i("gAdM"),u=i.n(r),l=i("lx39"),a=i.n(l),o=i("oIb9");const c="filtered-search-term",d="intent-activate-previous",p=".gl-token-close";function h(t){return t.type===c&&""===t.value.data.trim()}function g(t){const e=[];return t.forEach((function(t){h(t)||(t.type!==c?e.push({...t}):e.length>0&&"string"==typeof e[e.length-1]?e[e.length-1]+=" "+t.value.data:e.push(t.value.data))})),e}function f(t){Array.isArray(t),0}function v(t){return"string"==typeof t||(f(t),t.some((function(t){return"string"==typeof t||!t.id})))}function m(t,e,i){if(0===e)return t;let n;return n=t>=0&&t<i?t:e>0?-1:i,Object(o.d)(n+e,i)}function y({icon:t,title:e,type:i,optionComponent:n}){return{icon:t,title:e,value:i,component:n}}let I=0;const b=function(){const t="token-"+I;return I+=1,t};function V(t){return t.id?t:{...t,id:b()}}function S(t=""){return{id:b(),type:c,value:{data:t}}}function k(t,e=!1){f(t);return(Array.isArray(t)?t:[t]).reduce((function(t,i){if("string"==typeof i)if(e){const e=i.trim();e&&t.push(S(e))}else{i.split(" ").filter(Boolean).forEach((function(e){return t.push(S(e))}))}else t.push(V(i));return t}),[])}function w(t,e){return t.toLowerCase().includes(e.toLowerCase())}const x={type:c,icon:"title",title:"Search for this text"};function A(t){if("'"===s()(t)&&"'"===u()(t))return[t];if('"'===s()(t)&&'"'===u()(t))return[t];const e=t.split(" "),i=[];let n=!1,r="";for(;e.length;){const t=e.shift();if(-1===t.indexOf('"'))n?r+=" "+t:i.push(t);else{const[s,u]=t.split('"',2);n?(n=!1,r+=` ${s}"`,i.push(r),r="",u.length&&e.unshift(u)):(n=!0,s.length&&i.push(s),r='"'+u)}}return i}function O(t){if(!a()(t))return t;if(!t.includes(" "))return t;return["'",'"'].some((function(e){return s()(t)===e&&u()(t)===e}))?t:`"${t}"`}},bta6:function(t,e,i){t.exports=i("+p8b")},spe0:function(t,e,i){"use strict";var n={name:"GlFilteredSearchSuggestion",components:{GlIcon:i("d85j").a},inject:["filteredSearchSuggestionListInstance"],inheritAttrs:!1,props:{iconName:{type:String,required:!1,default:""},value:{required:!0,validator:function(){return!0}}},emits:["suggestion"],computed:{isActive(){return this.filteredSearchSuggestionListInstance.activeItem===this}},watch:{isActive(t){var e=this;t&&window.requestAnimationFrame((function(){var t;null===(t=e.$el)||void 0===t||t.scrollIntoView({block:"nearest",inline:"end"})}))}},created(){this.filteredSearchSuggestionListInstance.register(this)},beforeDestroy(){this.filteredSearchSuggestionListInstance.unregister(this)},methods:{emitValue(){this.filteredSearchSuggestionListInstance.$emit("suggestion",this.value)}}},s=i("tBpV"),r=Object(s.a)(n,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"gl-dropdown-item gl-filtered-search-suggestion",class:{"gl-filtered-search-suggestion-active":t.isActive}},[e("button",{staticClass:"dropdown-item",attrs:{"data-testid":"filtered-search-suggestion",tabindex:"-1"},on:{mousedown:function(e){return e.preventDefault(),t.emitValue.apply(null,arguments)}}},[t.iconName?e("gl-icon",{staticClass:"gl-dropdown-item-icon gl-fill-icon-default",attrs:{name:t.iconName}}):t._e(),t._v(" "),e("div",{staticClass:"gl-dropdown-item-text-wrapper"},[e("p",{staticClass:"gl-dropdown-item-text-primary"},[t._t("default")],2)])],1)])}),[],!1,null,null,null);e.a=r.exports}}]);
//# sourceMappingURL=d29857fc.a296f9a3.chunk.js.map